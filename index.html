<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Alertas de Programación</title>
  <style>
    body { font-family: Arial; margin: 20px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #f4f4f4; }
    .alert { padding: 10px; margin-bottom: 10px; border-radius: 5px; }
    .hoy { background-color: #ffcccc; }
    .manana { background-color: #ffe0b3; }
    .semana { background-color: #ccffcc; }
    .jueves-viernes { background-color: #cce5ff; }
    .mes { background-color: #e0ccff; }
  </style>
</head>
<body>

<h2>Tabla de Programación</h2>
<button onclick="agregarFila()">Agregar Fila</button>
<table id="tabla">
  <thead>
    <tr>
      <th>NOMBRE</th><th>FECHA</th><th>HORA</th><th>ORIGEN</th><th>DESTINO</th>
      <th>DOMICILIO</th><th>CONTACTO</th><th>CECO</th><th>HOTEL</th><th>VUELO</th><th>ESTADO</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<h2>Alertas</h2>
<div id="alertas"></div>

<script>
function agregarFila() {
  const fila = document.createElement("tr");
  for (let i = 0; i < 11; i++) {
    const celda = document.createElement("td");
    const input = document.createElement("input");
    input.type = i === 1 ? "date" : "text";
    celda.appendChild(input);
    fila.appendChild(celda);
  }
  document.querySelector("#tabla tbody").appendChild(fila);
}

function generarAlertas() {
  const hoy = new Date();
  const manana = new Date(hoy);
  manana.setDate(hoy.getDate() + 1);

  const jueves = new Date(hoy);
  jueves.setDate(hoy.getDate() + ((4 - hoy.getDay() + 7) % 7)); // próximo jueves
  const viernes = new Date(jueves);
  viernes.setDate(jueves.getDate() + 1);

  const finSemana = new Date(hoy);
  finSemana.setDate(hoy.getDate() + 7);

  const finMes = new Date(hoy);
  finMes.setMonth(hoy.getMonth() + 1);

  const alertas = {
    hoy: [],
    manana: [],
    juevesViernes: [],
    semana: [],
    mes: []
  };

  const filas = document.querySelectorAll("#tabla tbody tr");
  filas.forEach(fila => {
    const fechaInput = fila.cells[1].querySelector("input");
    if (!fechaInput || !fechaInput.value) return;

    const fecha = new Date(fechaInput.value);
    const nombre = fila.cells[0].querySelector("input")?.value || "Sin nombre";

    if (mismaFecha(fecha, hoy)) alertas.hoy.push(nombre);
    else if (mismaFecha(fecha, manana)) alertas.manana.push(nombre);
    else if (fecha >= jueves && fecha <= viernes) alertas.juevesViernes.push(nombre);
    else if (fecha > hoy && fecha <= finSemana) alertas.semana.push(nombre);
    else if (fecha > hoy && fecha <= finMes) alertas.mes.push(nombre);
  });

  mostrarAlertas(alertas);
}

function mismaFecha(a, b) {
  return a.getFullYear() === b.getFullYear() &&
         a.getMonth() === b.getMonth() &&
         a.getDate() === b.getDate();
}

function mostrarAlertas(alertas) {
  const contenedor = document.getElementById("alertas");
  contenedor.innerHTML = "";

  for (const tipo in alertas) {
    if (alertas[tipo].length > 0) {
      const div = document.createElement("div");
      div.className = `alert ${tipo}`;
      div.innerHTML = `<strong>${tipo.toUpperCase()}:</strong> ${alertas[tipo].join(", ")}`;
      contenedor.appendChild(div);
    }
  }
}

// Actualizar alertas cada 10 segundos
setInterval(generarAlertas, 10000);
</script>

</body>
</html>
